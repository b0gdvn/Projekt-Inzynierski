{% extends "layout.html" %}
{% block title %}Konta{% endblock %}
{% set active_page = "accounts" %}
{% block head %}
  {{ super() }}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/accounts.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/modals/account-modal.css') }}">

{% endblock %}
{% block content %}

<div class="accounts-flexbox">
  <a onclick="addAccBtnClick()" class="account-add bg-main-btn fc-main-btn">
    <span class="account-plus-sign fa fa-plus"></span>
    <span class="fs-1">Dodaj Konto</span>
  </a>
  {% for account,currency,card,acc_type,style in accounts %}
    <div class="popup" id="modal{{ account.id }}">
      <a class="popup_overlay" href="#"></a>
      <div class="popup_wrapper">
          <a class="popup_close" href="#">Zamknij</a>
          <form class="fs-4 income-form" method="POST" action="">
            {{ form_edit.hidden_tag() }}
            <div class="input-line">
              <input id="acc_amount" class="fs-1" type="number" required="required" step="0.01" min="0.01" placeholder="Aktualne saldo">
            </div>
            {{ form_edit.fin_inst(id="acc_name", value=account.fin_inst )}}
            {{ form_edit.currency.label(class="input-label") }}
            {{ form_edit.currency(id="acc_currency", selected="currency.name" ) }}
            {{ form_edit.acc_type.label(class="input-label") }}
            <select name="acc_type" id="acc_type">
              <option {% if acc_type.id == 1 %}selected{% endif %} value="1">Rachunek Bieżący</option>
              <option {% if acc_type.id == 2 %}selected{% endif %} value="2">Karta Kredytowa</option>
              <option {% if acc_type.id == 3 %}selected{% endif %} value="3">Konto Maklerskie</option>
              <option {% if acc_type.id == 4 %}selected{% endif %} value="4">Gotówka</option>
              <option {% if acc_type.id == 5 %}selected{% endif %} value="5">Inne</option>
            </select>
            {{ form_edit.card_type.label(class="input-label") }}
            {{ form_edit.card_type(id="acc_card_type") }}
            {{ form_edit.card_number(id="acc_card_num" ) }}
            <input type="hidden" name="account_id" value="{{ account.id }}">
            <div class="input-line">
              <input id="acc_reset" class="fs-3" type="reset" value="Wyczyszć">
              {{ form_edit.submit(id="acc_submit", class="fs-3") }}
            </div>
          </form>
      </div>
    </div>
    
    <div class="account-info style-{{ style.name }}">
      <span class="fs-1 fw-light">5,877.92 {{ currency.name }}</span>
      <span class="fs-1 fw-semibold">{{ acc_type.name }}</span>
      <span class="fs-2 fw-light">
        {% if account.fin_inst %}{{ account.fin_inst }}{% endif %} {% if card.name %}{{ card.name }}{% endif %}
      </span>
      {% if account.card_number %}
      <span class="fs-4">**** {{ account.card_number }}</span>  <!-- dodać If not none -->
      {% endif %}
      
      <a href="#modal{{ account.id }}" class="account-edit">
        <span class="fs-2">Edytuj Konto</span>
      </a>
    </div>
    <script>
      $(function() {
          var temp=2; 
          $("#acc_type").val(temp);
      });
    </script>
  {% endfor %}
</div>
{% endblock %}